


| Регистр          | Порт (базовый) | Примечание                                |
| ---------------- | -------------- | ----------------------------------------- |
| Data             | 0x1F0          | 16 бит                                    |
| Error / Features | 0x1F1          | чтение/запись                             |
| Sector Count     | 0x1F2          | количество секторов для команды           |
| LBA Low          | 0x1F3          | младший байт LBA                          |
| LBA Mid          | 0x1F4          | средний байт LBA                          |
| LBA High         | 0x1F5          | старший байт LBA                          |
| Drive/Head       | 0x1F6          | выбор диска, бит 6 = 1 для LBA, 0 для CHS |
| Status / Command | 0x1F7          | чтение статуса / запись команды           |


команды

| Команда                | Код  | Что делает                                                              | Регистры                                                                                 |
| ---------------------- | ---- | ----------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- |
| IDENTIFY DEVICE        | 0xEC | Возвращает данные о диске (модель, серийник, размер, поддержка LBA/DMA) | 0x1F0 (Data), 0x1F6 (выбор диска), 0x1F7 (команда)                                       |
| READ SECTORS           | 0x20 | Читает один или несколько секторов                                      | 0x1F0 (Data), 0x1F2 (кол-во секторов), 0x1F3..0x1F5 (LBA), 0x1F6 (диск), 0x1F7 (команда) |
| WRITE SECTORS          | 0x30 | Записывает один или несколько секторов                                  | 0x1F0 (Data), 0x1F2 (кол-во секторов), 0x1F3..0x1F5 (LBA), 0x1F6 (диск), 0x1F7 (команда) |
| READ MULTIPLE          | 0xC4 | Чтение нескольких секторов за раз                                       | 0x1F0 (Data), 0x1F2 (кол-во секторов), 0x1F3..0x1F5 (LBA), 0x1F6 (диск), 0x1F7 (команда) |
| WRITE MULTIPLE         | 0xC5 | Запись нескольких секторов за раз                                       | 0x1F0 (Data), 0x1F2 (кол-во секторов), 0x1F3..0x1F5 (LBA), 0x1F6 (диск), 0x1F7 (команда) |
| SET FEATURES           | 0xEF | Настройка функций диска (PIO/DMA, кеш)                                  | 0x1F1 (Features), 0x1F7 (команда)                                                        |
| PACKET COMMAND (ATAPI) | 0xA0 | Работа с CD/DVD через пакет                                             | 0x1F0 (Data), 0x1F7 (команда)                                                            |



Если к шине не подключены диски до в байте состояния будет 0xFF


Биты ответа Status Register 0x1F7

| Бит | Символ   | Назначение                                                                                                                   |
| --- | -------- | ---------------------------------------------------------------------------------------------------------------------------- |
| 0   | **ERR**  | **Error** — если установлен, последняя операция завершилась с ошибкой. Для детальной ошибки читают `0x1F1` (Error Register). |
| 1   | **IDX**  | **Index** — устаревший, почти никогда не используется (только для старых MFM/RLL дисков).                                    |
| 2   | **CORR** | **Corrected data** — показывает, что данные были исправлены аппаратно (ECC). Используется редко.                             |
| 3   | **DRQ**  | **Data Request** — диск готов передавать/принимать данные (read/write). Важно для всех операций чтения/записи.               |
| 4   | **SRV**  | **Overlapped Mode Service Request** — используется для “overlapped” режима (редко).                                          |
| 5   | **DF**   | **Device Fault** — устройство выдало внутреннюю ошибку. Если установлен, операция прервана.                                  |
| 6   | **RDY**  | **Device Ready** — диск готов к командам. Если сброшен, диск не готов.                                                       |
| 7   | **BSY**  | **Busy** — диск занят, не принимать новые команды. Пока бит = 1, все команды игнорируются.                                   |
