# API

## Детали

Системный вызов выполняется посредством генерации программного прерывания `0x22`

Следующие регистры используются для передачи аргументов:

| Register  | Description  |
| :-------------: | :------------- |
| `EAX`  | Номер системного вызова  |
| `EBX`  | 1-й аргумент  |
| `ECX`  | 2-й аргумент  |
| `EDX`  | 3-й аргумент  |
| `ESI`  | 4-й аргумент  |
| `EDI`  | 5-й аргумент  |
| `EBP`  | 6-й аргумент  |
| `EAX`  | Возвращаемое значение  |



## Таблица системных вызовов

| Number  | Name  | Description  |
| :-------------: | :------------- | :------------- |
| `0x0`  | [print_text](#print_text)  | Вывод текста |
| `0x1`  | [new_line](#new_line)  | Переход на следующую строку |
| `0x2`  | [cursor_update](#cursor_update)  | Обновить курсор |
| `0x3`  | [clear_display](#clear_display)  | Очистить дисплей |
| `0x4`  | [get_current_symbol](#get_current_symbol)  | Получить текущий символ |
| `0x5`  | [delete_current_symbol](#delete_current_symbol)  | Удалить текущий символ |
| `0x10`  | [read_sector](#read_sector)  | Читать определённый сектор диска |
| `0x11`  | [write_sector](#write_sector)  | Записать в определённый сектор диска |
| `0x50`  | [execute_program](#execute_program)  | Указать следующую программу для исполнения |


## Системные вызовы


### print_text

**Номер системного вызова:** `0x0`

**Описание:** Вывод текста

**Аргументы:**
| Register  | Description  |
| :-------------: | :------------- |
| `EBX`  | Адрес строки |
| `ECX`  | Количество байт  |
| `EDX`  | X  |
| `ESI`  | Y  |
| `EDI`  | Цвет текста  |
| `EBP`  | Цвет фона  |

**Возвращает:** None

---

### new_line

**Номер системного вызова:** `0x1`

**Описание:** Переход на следующую строку (y += 1)

**Аргументы:** None

**Возвращает:** None

---

### cursor_update

**Номер системного вызова:** `0x2`

**Описание:** Обновить курсор. Перемещает курсор на текущие координаты x и y

**Аргументы:** None

**Возвращает:** None

---

### clear_display

**Номер системного вызова:** `0x3`

**Описание:** Очистить дисплей

**Аргументы:** None

**Возвращает:** None

---

### get_current_symbol

**Номер системного вызова:** `0x4`

**Описание:** Получить текущий символ на экране. Получает символ, на который указывают координаты x и y. Можно задать смещение

**Аргументы:**
| Register  | Description  |
| :-------------: | :------------- |
| `EBX`  | Смещение относительно текущей позиции |

**Возвращает:** Символ

---

### delete_current_symbol

**Номер системного вызова:** `0x5`

**Описание:** Удалить текущий символ на экране. Удаляет символ, на который указывают координаты x и y. Можно задать смещение

**Аргументы:**
| Register  | Description  |
| :-------------: | :------------- |
| `EBX`  | Смещение относительно текущей позиции |

**Возвращает:** Удалённый символ

---

### read_sector

**Номер системного вызова:** `0x10`

**Описание:** Читать определённый сектор с диска

**Аргументы:**
| Register  | Description  |
| :-------------: | :------------- |
| `EBX`  | Идентификатор диска |
| `ECX`  | Номер сектора |
| `EDX`  | Адрес переменной куда читать (размер 512 байт) |

**Возвращает:** 0 - успешно, -1 - неудача

---

### write_sector

**Номер системного вызова:** `0x11`

**Описание:** Записать в определённый сектор диска

**Аргументы:**
| Register  | Description  |
| :-------------: | :------------- |
| `EBX`  | Идентификатор диска |
| `ECX`  | Номер сектора |
| `EDX`  | Адрес переменной откуда читать (размер 512 байт) |

**Возвращает:** 0 - успешно, -1 - неудача

---

### execute_program

**Номер системного вызова:** `0x50`

**Описание:** Указать номер следующей программы для исполнения

**Аргументы:**
| Register  | Description  |
| :-------------: | :------------- |
| `EBX`  | Номер программы |

**Возвращает:** None

